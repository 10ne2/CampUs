<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UnsubmitHomework-Mapper">
	<select id="selectUnsubmitHomework" resultType="unsubmithw">
		SELECT
			h.hw_no, h.hw_name, h.hw_startdate, h.hw_enddate, h.hw_desc,
			TRUNC(h.hw_enddate - SYSDATE) AS d_day
		FROM
			homework h
			JOIN lec_class l ON h.lec_id = l.lec_id
			JOIN lecture_list ll ON l.lec_id = ll.lec_id
		WHERE
			ll.stu_id = #{stu_id}
			AND NOT EXISTS (
				SELECT 1
				FROM homework_submit hws
				WHERE hws.hw_no = h.hw_no
					AND hws.lecs_id = ll.lecs_id
				)
		ORDER BY
			h.hw_enddate;
	</select>

</mapper>





